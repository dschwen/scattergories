<html>
<head>
<title>Sockettest</title>
<link href="css/style.css" rel="stylesheet" type="text/css" />
<script src="/socket.io/socket.io.js"></script>
<script src="/lib/jquery-1.7.min.js"></script>
<script src="/lib/jquery.event.drag-2.0.min.js"></script>
<script src="/lib/all.js"></script>
</head>
<body>
<div id="gamepad"></div>

<div id="log"></div>
<script>
  var l = document.location,
      attempt = 1,
      socket = io.connect( l.protocol + '//' + l.host, {
        'reconnect': true,
        'reconnection delay': 500,
        'max reconnection attempts': 10
      }),
      tile = [1,20],
      tiles = new Image(), map = [],
      can = $('#game')[0], 
      c = can.getContext('2d'),
      v = { x:0, y: 0 }; // viewport (x,y,w,h,ox,oy,cw,ch,csw,csh)

      
  function keyenter(e) {
    console.log(e.target);
    socket.emit( 'update', { n: , word: '' } );
  }

  // connection established
  socket.on( 'ready', All.group('init',function (data) {
    $('#log').append( $('<div></div').text( data.motd ) );
    map = data.map;
  }) );

  // receive countdown event
  socket.on( 'update', function (data) {
    console.log(data.n);
  } );

  // receive game start event
  socket.on( 'startgame', function (data) {
    console.log(data);
  } );

  // receive game start event
  socket.on( 'stopgame', function (data) {
    console.log(data);
  } );

  // user handling/info events
  socket.on( 'newuser', function (data) {
    $('#log').append( $('<div></div').text( 'user ' + data.id + ' connected' ) );
  } );
  socket.on( 'userleft', function (data) {
    $('#log').append( $('<div></div').text( 'user ' + data.id + ' left' ) );
  } );
  socket.on('disconnect', function () {
    $('#log').append( $('<div></div').text( "Disconnected :-(" ) );
    //socket.socket.connect( l.protocol + '//' + l.host );
  });
</script>
</body>
</html>
